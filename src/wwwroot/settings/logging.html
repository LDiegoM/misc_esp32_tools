<div class="container mt-4">
    <p>This page contains current device Logging configurations, and allows to modify them.</p>
    <div class="row">
        <div class="col">
            <label for="level" class="form-label">Level:</label>
            <select class="form-control form-select" id="level" placeholder="Level" name="level">
                <option value="0" {active_debug}>Debug (all logs active)</option>
                <option value="1" {active_info}>Informative, Warnings and Errors</option>
                <option value="2" {active_warning}>Warnings and Errors</option>
                <option value="3" {active_error}>Errors only</option>
            </select>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <label for="refresh_period" class="form-label">Refresh period (hours):</label>
            <input type="number" class="form-control" id="refresh_period" placeholder="Refresh period" name="refresh_period" value="{refresh_period}">
        </div>
    </div>
    <div class="row">
        <div class="col">
            <button type="button" class="btn btn-primary mt-2" onclick="saveLogging();">Save</button>
        </div>
    </div>
</div>
<script>
function saveLogging() {
    const body = getUpdateBody();

    executeCall("/settings/logging", "PUT", body).then((updOk) => {
        if (updOk == true) {
            document.location.reload(true);
        }
    });
}

function getUpdateBody() {
    const level = document.getElementById("level").value;
    console.log("level: " + level);
    const refresh_period = document.getElementById("refresh_period").value;

    return '{"level":' + level + ',"refresh_period":' + refresh_period + '}';
}
</script>