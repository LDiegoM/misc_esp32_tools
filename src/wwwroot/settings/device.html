<div class="container mt-4">
    <p>This page contains current Device configurations, and allows to modify them.</p>
    <div class="row">
        <div class="col">
            <label for="deviceID" class="form-label">Device Identifier:</label>
            <input type="text" class="form-control" id="deviceID" placeholder="Device Identifier" name="deviceID" value="{deviceID}">
        </div>
    </div>
    <div class="row">
        <div class="col">
            <label for="geoLocationS" class="form-label">Geo Location S:</label>
            <input type="number" class="form-control" id="geoLocationS" placeholder="Geo Location S" name="geoLocationS" value="{geoLocationS}">
        </div>
        <div class="col">
            <label for="geoLocationW" class="form-label">Geo Location W:</label>
            <input type="number" class="form-control" id="geoLocationW" placeholder="Geo Location W" name="geoLocationW" value="{geoLocationW}">
        </div>
    </div>
    <div class="row">
        <div class="col">
            <button type="button" class="btn btn-primary mt-2" onclick="saveDevice();">Save</button>
        </div>
    </div>
</div>
<script>
function saveDevice() {
    const body = getUpdateBody();

    executeCall("/settings/device", "PUT", body).then((updOk) => {
        if (updOk == true) {
            document.location.reload(true);
        }
    });
}

function getUpdateBody() {
    const deviceID = document.getElementById("deviceID").value;
    const geoLocationS = document.getElementById("geoLocationS").value;
    const geoLocationW = document.getElementById("geoLocationW").value;

    var body = '{"deviceID":"' + deviceID + '"';
    if (geoLocationS != "" && geoLocationW != "") {
        body += ',"geoLocationS":' + geoLocationS + ',"geoLocationW":' + geoLocationW;
    }
    body += '}';
    return body;
}
</script>