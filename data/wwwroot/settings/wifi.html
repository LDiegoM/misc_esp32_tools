<div class="container mt-4"><p>This page contains current WiFi configurations, and allows to modify them.</p><p>Current WiFi APs (update if necessary)</p><!--{wifi_update_ap.html}--></div><div class="container mt-4"><p>New WiFi AP (complete to add new)</p><div class="row"><div class="col"><input type="text" class="form-control" id="ap" placeholder="AP ssid" name="ap"></div><div class="col"><input type="password" class="form-control" id="pw" placeholder="Password" name="pw"></div></div></div><div class="container mt-2"><div class="row"><div class="col"><button type="submit" class="btn btn-primary" onclick="saveWiFi()">Save</button></div></div></div><script>function executeDeleteAP(e){var t=true;if(e!=""){executeCall("/settings/wifi?ap="+e,"DELETE").then(e=>{t=e})}if(t){document.location.reload(true)}}async function executeUpdateAPs(){const e=document.getElementsByClassName("upd-ap");const t=[...e].map(e=>e.value);const a=document.getElementsByClassName("upd-pw");const n=[...a].map(e=>e.value);const s=getUpdateBody(t,n);var u=false;if(s!='{"aps":[]}'){u=await executeCall("/settings/wifi","PUT",s)}return u}function getUpdateBody(e,t){var a='{"aps":[';var n=0;for(var s=0;s<e.length;s++){if(t[s]!="****"){if(n>0){a+=","}n++;a+='{"ap":"'+e[s]+'", "pw":"'+t[s]+'"}'}}a+="]}";return a}async function executeInsertAP(){const e=document.getElementById("ap").value;const t=document.getElementById("pw").value;var a=false;if(e!=""){const n='{"ap":"'+e+'","pw":"'+t+'"}';a=await executeCall("/settings/wifi","POST",n)}return a}function saveWiFi(){var t=false;var a=false;executeUpdateAPs().then(e=>{t=e;executeInsertAP().then(e=>{a=e;if(t==true||a==true){document.location.reload(true)}})})}</script>